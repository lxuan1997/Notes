<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/iCode/images/logo.png"><link rel="apple-touch-icon" href="/iCode/images/logo.png"><link rel="stylesheet" href="/iCode/styles/index.css"><meta name="referrer" content="no-referrer"><title>在vue中使用fabric | iCode</title><meta name="description" content="">
    <link rel="preload" href="/iCode/assets/style-6118803e.css" as="style"><link rel="stylesheet" href="/iCode/assets/style-6118803e.css">
    <link rel="modulepreload" href="/iCode/assets/app-c0a93dd5.js"><link rel="modulepreload" href="/iCode/assets/framework-9bc128ed.js"><link rel="modulepreload" href="/iCode/assets/vue.html-807c4d96.js"><link rel="modulepreload" href="/iCode/assets/vue.html-bfefed00.js"><link rel="prefetch" href="/iCode/assets/index.html-083b5953.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-c87f68f2.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-336d3022.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-97da9dc0.js" as="script"><link rel="prefetch" href="/iCode/assets/tips.html-d9cb7b0a.js" as="script"><link rel="prefetch" href="/iCode/assets/BMap.html-0384bee3.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-90b98f56.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-be1d740d.js" as="script"><link rel="prefetch" href="/iCode/assets/IDEA.html-ee094ef6.js" as="script"><link rel="prefetch" href="/iCode/assets/actions.html-e7080490.js" as="script"><link rel="prefetch" href="/iCode/assets/commands.html-a692d039.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-24ba877e.js" as="script"><link rel="prefetch" href="/iCode/assets/github-actions.html-b8c09f23.js" as="script"><link rel="prefetch" href="/iCode/assets/github-pages.html-e0d857ee.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-458fb214.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-7da64272.js" as="script"><link rel="prefetch" href="/iCode/assets/tips.html-e4b9c748.js" as="script"><link rel="prefetch" href="/iCode/assets/关于元素尺寸、鼠标坐标.html-a6e6e852.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-6224affc.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-ac2d2c75.js" as="script"><link rel="prefetch" href="/iCode/assets/Pinia.html-b7d2bb1a.js" as="script"><link rel="prefetch" href="/iCode/assets/Vue.js的设计与实现.html-01774624.js" as="script"><link rel="prefetch" href="/iCode/assets/bugs.html-f8afdcc5.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-6eed9f6c.js" as="script"><link rel="prefetch" href="/iCode/assets/packages.html-82142bcb.js" as="script"><link rel="prefetch" href="/iCode/assets/tips.html-94b4da70.js" as="script"><link rel="prefetch" href="/iCode/assets/vue-router.html-9a9b767b.js" as="script"><link rel="prefetch" href="/iCode/assets/vuex.html-be76aa73.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-3b0c0667.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-011ff2e5.js" as="script"><link rel="prefetch" href="/iCode/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-ea82a4b5.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-6971ba16.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-a5f5548e.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-72302871.js" as="script"><link rel="prefetch" href="/iCode/assets/tips.html-6691d775.js" as="script"><link rel="prefetch" href="/iCode/assets/BMap.html-906ac0e9.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-e77d6390.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-efdc969a.js" as="script"><link rel="prefetch" href="/iCode/assets/IDEA.html-1f105d09.js" as="script"><link rel="prefetch" href="/iCode/assets/actions.html-ae58dc3c.js" as="script"><link rel="prefetch" href="/iCode/assets/commands.html-1366d08f.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-c80ee788.js" as="script"><link rel="prefetch" href="/iCode/assets/github-actions.html-47acde69.js" as="script"><link rel="prefetch" href="/iCode/assets/github-pages.html-977951f2.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-e5b1f1ea.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-85957b6c.js" as="script"><link rel="prefetch" href="/iCode/assets/tips.html-fd3b21e4.js" as="script"><link rel="prefetch" href="/iCode/assets/关于元素尺寸、鼠标坐标.html-136f71c2.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-f328dd40.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-4f5a8133.js" as="script"><link rel="prefetch" href="/iCode/assets/Pinia.html-ffad7d03.js" as="script"><link rel="prefetch" href="/iCode/assets/Vue.js的设计与实现.html-51e074ae.js" as="script"><link rel="prefetch" href="/iCode/assets/bugs.html-f057846d.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-8cc939ee.js" as="script"><link rel="prefetch" href="/iCode/assets/packages.html-f3e029b7.js" as="script"><link rel="prefetch" href="/iCode/assets/tips.html-23ccd955.js" as="script"><link rel="prefetch" href="/iCode/assets/vue-router.html-5f1c51c6.js" as="script"><link rel="prefetch" href="/iCode/assets/vuex.html-35227768.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-db7f26e3.js" as="script"><link rel="prefetch" href="/iCode/assets/index.html-1e297b83.js" as="script"><link rel="prefetch" href="/iCode/assets/404.html-7c79e702.js" as="script"><link rel="prefetch" href="/iCode/assets/VuePlayground-4037b1d0.js" as="script"><link rel="prefetch" href="/iCode/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/iCode/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/iCode/assets/index-ade63bb5.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/iCode/" class=""><!----><span class="site-name can-hide">iCode</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/iCode/javascript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/wx/" class="" aria-label="微信小程序"><!--[--><!--]--> 微信小程序 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/echarts/" class="" aria-label="Echarts"><!--[--><!--]--> Echarts <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/fabric/" class="router-link-active" aria-label="Fabric.js"><!--[--><!--]--> Fabric.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/nginx/" class="" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/iCode/windows/" class="" aria-label="Windows"><!--[--><!--]--> Windows <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/chrome/" class="" aria-label="Chrome"><!--[--><!--]--> Chrome <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/github/" class="" aria-label="GitHub"><!--[--><!--]--> GitHub <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/shell/" class="" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/iCode/javascript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/wx/" class="" aria-label="微信小程序"><!--[--><!--]--> 微信小程序 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/echarts/" class="" aria-label="Echarts"><!--[--><!--]--> Echarts <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/fabric/" class="router-link-active" aria-label="Fabric.js"><!--[--><!--]--> Fabric.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/iCode/nginx/" class="" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/iCode/windows/" class="" aria-label="Windows"><!--[--><!--]--> Windows <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/chrome/" class="" aria-label="Chrome"><!--[--><!--]--> Chrome <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/github/" class="" aria-label="GitHub"><!--[--><!--]--> GitHub <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iCode/shell/" class="" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">fabric <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/iCode/fabric/" class="router-link-active sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="在vue中使用fabric"><!--[--><!--]--> 在vue中使用fabric <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iCode/fabric/vue.html#基本用法" class="router-link-active router-link-exact-active sidebar-item" aria-label="基本用法"><!--[--><!--]--> 基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#常用功能" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用功能"><!--[--><!--]--> 常用功能 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iCode/fabric/vue.html#添加元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加元素"><!--[--><!--]--> 添加元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#添加svg" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加svg"><!--[--><!--]--> 添加svg <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#添加图片" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加图片"><!--[--><!--]--> 添加图片 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#画布数据导入、导出" class="router-link-active router-link-exact-active sidebar-item" aria-label="画布数据导入、导出"><!--[--><!--]--> 画布数据导入、导出 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#画布保存为图片" class="router-link-active router-link-exact-active sidebar-item" aria-label="画布保存为图片"><!--[--><!--]--> 画布保存为图片 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#元素编组、取消编组" class="router-link-active router-link-exact-active sidebar-item" aria-label="元素编组、取消编组"><!--[--><!--]--> 元素编组、取消编组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#调整元素层级" class="router-link-active router-link-exact-active sidebar-item" aria-label="调整元素层级"><!--[--><!--]--> 调整元素层级 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#视图自适应" class="router-link-active router-link-exact-active sidebar-item" aria-label="视图自适应"><!--[--><!--]--> 视图自适应 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/iCode/fabric/vue.html#拓展功能" class="router-link-active router-link-exact-active sidebar-item" aria-label="拓展功能"><!--[--><!--]--> 拓展功能 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iCode/fabric/vue.html#自定义control" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义Control"><!--[--><!--]--> 自定义Control <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#自定义属性导出" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义属性导出"><!--[--><!--]--> 自定义属性导出 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iCode/fabric/vue.html#文本组合图形" class="router-link-active router-link-exact-active sidebar-item" aria-label="文本组合图形"><!--[--><!--]--> 文本组合图形 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="在vue中使用fabric" tabindex="-1"><a class="header-anchor" href="#在vue中使用fabric" aria-hidden="true">#</a> 在vue中使用fabric</h1><h2 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法" aria-hidden="true">#</a> 基本用法</h2><!--[--><div class="vue-playground-wrapper"><div class="header">vue@3.2.47 + fabric@5.3.0</div><div class="repl-container"><div class="loading-icon-wrapper preview-loading" style="display:flex;align-items:center;justify-content:center;height:192px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div><!----></div></div><!--]--><h2 id="常用功能" tabindex="-1"><a class="header-anchor" href="#常用功能" aria-hidden="true">#</a> 常用功能</h2><h3 id="添加元素" tabindex="-1"><a class="header-anchor" href="#添加元素" aria-hidden="true">#</a> 添加元素</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 只能生成一种类型 如Rect</span>
<span class="token keyword">function</span> <span class="token function">addRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// options</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>
    canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 可批量生成各种类型</span>
<span class="token keyword">function</span> <span class="token function">addObjectbyType</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> klass <span class="token operator">=</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">getKlass</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
    klass<span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="添加svg" tabindex="-1"><a class="header-anchor" href="#添加svg" aria-hidden="true">#</a> 添加svg</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// svg地址加载</span>
<span class="token keyword">function</span> <span class="token function">loadSVGFromURL</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fabric<span class="token punctuation">.</span><span class="token function">loadSVGFromURL</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">objects</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> group <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Group</span><span class="token punctuation">(</span>objects<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token comment">// options</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span>
        canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// svg字符串加载</span>
<span class="token keyword">function</span> <span class="token function">loadSVGFromString</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fabric<span class="token punctuation">.</span><span class="token function">loadSVGFromString</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">objects</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> group <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Group</span><span class="token punctuation">(</span>objects<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token comment">// options</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span>
        canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="添加图片" tabindex="-1"><a class="header-anchor" href="#添加图片" aria-hidden="true">#</a> 添加图片</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">addImage</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fabric<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">fromURL</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>width<span class="token punctuation">}</span> <span class="token operator">=</span> image
        <span class="token keyword">const</span> initialScale <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">/</span> width
        image<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">scaleX</span><span class="token operator">:</span> initialScale<span class="token punctuation">,</span>
            <span class="token literal-property property">scaleY</span><span class="token operator">:</span> initialScale<span class="token punctuation">,</span>
            <span class="token comment">// options</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>
        canvas<span class="token punctuation">.</span><span class="token function">setActiveObject</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="画布数据导入、导出" tabindex="-1"><a class="header-anchor" href="#画布数据导入、导出" aria-hidden="true">#</a> 画布数据导入、导出</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入</span>
<span class="token keyword">function</span> <span class="token function">dataImport</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    canvas<span class="token punctuation">.</span><span class="token function">loadFromJSON</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// callback</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 导出</span>
<span class="token keyword">function</span> <span class="token function">dataExport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> canvas<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="画布保存为图片" tabindex="-1"><a class="header-anchor" href="#画布保存为图片" aria-hidden="true">#</a> 画布保存为图片</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 图片形式</span>
<span class="token keyword">function</span> <span class="token function">saveAsImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> dataUrl <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">&#39;image/jpeg&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span>
    link<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&#39;画布.png&#39;</span>
    link<span class="token punctuation">.</span>href <span class="token operator">=</span> dataUrl
    link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="元素编组、取消编组" tabindex="-1"><a class="header-anchor" href="#元素编组、取消编组" aria-hidden="true">#</a> 元素编组、取消编组</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 编组</span>
<span class="token keyword">function</span> <span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> activeObject <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>activeObject<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">&#39;activeSelection&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    activeObject<span class="token punctuation">.</span><span class="token function">toGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 取消编组</span>
<span class="token keyword">function</span> <span class="token function">unGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> activeObject <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>activeObject<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">&#39;group&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    activeObject<span class="token punctuation">.</span><span class="token function">toActiveSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="调整元素层级" tabindex="-1"><a class="header-anchor" href="#调整元素层级" aria-hidden="true">#</a> 调整元素层级</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 移至顶层</span>
<span class="token keyword">function</span> <span class="token function">bringToFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> activeObject <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    activeObject<span class="token punctuation">.</span><span class="token function">bringToFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移至底层</span>
<span class="token keyword">function</span> <span class="token function">sendToBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> activeObject <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> canvas<span class="token punctuation">.</span>freeLayerIndexMinLimit <span class="token operator">||</span> <span class="token number">0</span>
    activeObject<span class="token punctuation">.</span><span class="token function">sendToBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 往上一层</span>
<span class="token keyword">function</span> <span class="token function">bringForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> activeObject <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    activeObject<span class="token punctuation">.</span><span class="token function">bringForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 往下一层</span>
<span class="token keyword">function</span> <span class="token function">sendBackwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> activeObject <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    activeObject<span class="token punctuation">.</span><span class="token function">sendBackwards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 指定层级</span>
<span class="token keyword">function</span> <span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> activeObject <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    activeObject<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="视图自适应" tabindex="-1"><a class="header-anchor" href="#视图自适应" aria-hidden="true">#</a> 视图自适应</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>参考：<a href="https://www.hangge.com/blog/cache/detail_1861.html" target="_blank" rel="noopener noreferrer">https://www.hangge.com/blog/cache/detail_1861.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>fabric<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fabric&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useZoomToFit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">canvas</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> objects <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> minX<span class="token punctuation">,</span> minY<span class="token punctuation">,</span> maxX<span class="token punctuation">,</span> maxY
    <span class="token keyword">if</span> <span class="token punctuation">(</span>objects<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> rect <span class="token operator">=</span> objects<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        minX <span class="token operator">=</span> rect<span class="token punctuation">.</span>left
        minY <span class="token operator">=</span> rect<span class="token punctuation">.</span>top
        maxX <span class="token operator">=</span> rect<span class="token punctuation">.</span>left <span class="token operator">+</span> rect<span class="token punctuation">.</span>width
        maxY <span class="token operator">=</span> rect<span class="token punctuation">.</span>top <span class="token operator">+</span> rect<span class="token punctuation">.</span>height
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> objects<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rect <span class="token operator">=</span> objects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            minX <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>minX<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
            minY <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>minY<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>top<span class="token punctuation">)</span>
            maxX <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxX<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>left <span class="token operator">+</span> rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
            maxY <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxY<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>top <span class="token operator">+</span> rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 计算平移坐标</span>
    <span class="token keyword">const</span> panX <span class="token operator">=</span> <span class="token punctuation">(</span>maxX <span class="token operator">-</span> minX <span class="token operator">-</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> minX
    <span class="token keyword">const</span> panY <span class="token operator">=</span> <span class="token punctuation">(</span>maxY <span class="token operator">-</span> minY <span class="token operator">-</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> minY
    <span class="token comment">// 开始平移</span>
    canvas<span class="token punctuation">.</span><span class="token function">absolutePan</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> panX<span class="token punctuation">,</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> panY
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 计算缩放比例</span>
    <span class="token keyword">const</span> zoom <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token punctuation">(</span>maxX <span class="token operator">-</span> minX<span class="token punctuation">)</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token punctuation">(</span>maxY <span class="token operator">-</span> minY<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// 计算缩放中心</span>
    <span class="token keyword">const</span> zoomPoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;zoom&#39;</span><span class="token punctuation">,</span> zoom<span class="token punctuation">,</span> zoomPoint<span class="token punctuation">)</span>
    <span class="token comment">// 开始缩放</span>
    canvas<span class="token punctuation">.</span><span class="token function">zoomToPoint</span><span class="token punctuation">(</span>zoomPoint<span class="token punctuation">,</span> zoom<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="拓展功能" tabindex="-1"><a class="header-anchor" href="#拓展功能" aria-hidden="true">#</a> 拓展功能</h2><h3 id="自定义control" tabindex="-1"><a class="header-anchor" href="#自定义control" aria-hidden="true">#</a> 自定义Control</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 统一隐藏控制  [&#39;mb&#39;, &#39;ml&#39;, &#39;mr&#39;, &#39;mt&#39;, &#39;mtr&#39;]</span>
<span class="token keyword">const</span> hiddenControls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;mtr&#39;</span><span class="token punctuation">]</span>
hiddenControls<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fabric<span class="token punctuation">.</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>controls<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fabric<span class="token punctuation">.</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>transparentCorners <span class="token operator">=</span> <span class="token boolean">false</span>
fabric<span class="token punctuation">.</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>cornerSize <span class="token operator">=</span> <span class="token number">8</span>


fabric<span class="token punctuation">.</span><span class="token class-name">Textbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>controls <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 类型单独设置</span>
fabric<span class="token punctuation">.</span><span class="token class-name">Rect</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>controls <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
fabric<span class="token punctuation">.</span><span class="token class-name">Textbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>controls <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="自定义属性导出" tabindex="-1"><a class="header-anchor" href="#自定义属性导出" aria-hidden="true">#</a> 自定义属性导出</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>参考：<a href="https://github.com/fabricjs/fabric.js/wiki/How-to-set-additional-properties-in-all-fabric.Objects" target="_blank" rel="noopener noreferrer">https://github.com/fabricjs/fabric.js/wiki/How-to-set-additional-properties-in-all-fabric.Objects<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> originalToObject <span class="token operator">=</span> fabric<span class="token punctuation">.</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toObject<span class="token punctuation">;</span>
<span class="token keyword">const</span> myAdditional <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
fabric<span class="token punctuation">.</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toObject</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">additionalProperties</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">originalToObject</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> myAdditional<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>additionalProperties<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="文本组合图形" tabindex="-1"><a class="header-anchor" href="#文本组合图形" aria-hidden="true">#</a> 文本组合图形</h3><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>组合图形本质上是通过<code>fabric.Group</code>实现，以文本框加矩形<code>Textbox + Rect</code>为例</p><p>需要注意的是<code>Textbox</code>在<code>Group</code>内是无法进行编辑的，需要另外编写代码实现组合图形内的文本编辑；</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"><a href="https://jelly.jd.com/article/6151e9512685d0019947558d" target="_blank" rel="noopener noreferrer">JELLY | 图形编程 Fabric.js 复合图形实现记录<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"><a href="https://jelly.jd.com/article/62bd77e952d2600188a9fdac" target="_blank" rel="noopener noreferrer">JELLY | 聊聊 fabric.js Group 对象<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> v6版本<code>Group</code>将重写，<code>Group</code>内<code>Textbox</code>编辑功能不受影响，<a href="http://jsfiddle.net/qxdk4h9L/2/" target="_blank" rel="noopener noreferrer">beta预览<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></label></li></ul></div><div class="code-tabs"><div class="code-tabs-nav" role="tablist"><button type="button" class="code-tabs-nav-tab active" role="tab" aria-controls="codetab-98-0" aria-selected="true">RectText.class.js</button><button type="button" class="code-tabs-nav-tab" role="tab" aria-controls="codetab-98-1" aria-selected="false">tempText.mixin.js</button></div><!--[--><div class="code-tab active" id="codetab-98-0" role="tabpanel" aria-expanded="true"><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>fabric<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fabric&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>v4 <span class="token keyword">as</span> uuid<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;uuid&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>TempText<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./tempText.mixin&#39;</span>

<span class="token keyword">const</span> <span class="token constant">DEFAULT_SHAPE_PADDING_X</span> <span class="token operator">=</span> <span class="token number">8</span>

fabric<span class="token punctuation">.</span>RectText <span class="token operator">=</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span>fabric<span class="token punctuation">.</span>Group<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;rect-text&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&#39;#666666&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token literal-property property">textAlign</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lineHeight</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token string">&#39;#000000&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">subTargetCheck</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function-variable function">initialize</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> isAlreadyGrouped</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        options<span class="token punctuation">.</span>id <span class="token operator">=</span> options<span class="token punctuation">.</span>id <span class="token operator">||</span> <span class="token function">uuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        options<span class="token punctuation">.</span>width <span class="token operator">=</span> options<span class="token punctuation">.</span>width <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width
        options<span class="token punctuation">.</span>height <span class="token operator">=</span> options<span class="token punctuation">.</span>height <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height
        options<span class="token punctuation">.</span>fill <span class="token operator">=</span> options<span class="token punctuation">.</span>fill <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fill
        options<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> options<span class="token punctuation">.</span>fontSize <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontSize
        options<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> options<span class="token punctuation">.</span>textAlign <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>textAlign
        options<span class="token punctuation">.</span>lineHeight <span class="token operator">=</span> options<span class="token punctuation">.</span>lineHeight <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lineHeight
        options<span class="token punctuation">.</span>stroke <span class="token operator">=</span> options<span class="token punctuation">.</span>stroke <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stroke
        options<span class="token punctuation">.</span>strokeWidth <span class="token operator">=</span> options<span class="token punctuation">.</span>strokeWidth <span class="token operator">||</span> <span class="token number">2</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>objects<span class="token punctuation">,</span> <span class="token operator">...</span>restOptions<span class="token punctuation">}</span> <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token keyword">const</span> <span class="token punctuation">{</span>
            id<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> fill<span class="token punctuation">,</span> fontSize<span class="token punctuation">,</span> textAlign<span class="token punctuation">,</span> lineHeight<span class="token punctuation">,</span> stroke<span class="token punctuation">,</span> strokeWidth
        <span class="token punctuation">}</span> <span class="token operator">=</span> options
        <span class="token keyword">const</span> defaultShapeOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;rect&#39;</span><span class="token punctuation">,</span>
            width<span class="token punctuation">,</span>
            height<span class="token punctuation">,</span>
            <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
            stroke<span class="token punctuation">,</span>
            strokeWidth
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> defaultTextOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;textbox&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> width <span class="token operator">-</span> <span class="token constant">DEFAULT_SHAPE_PADDING_X</span><span class="token punctuation">,</span>
            fontSize<span class="token punctuation">,</span>
            fill<span class="token punctuation">,</span>
            textAlign<span class="token punctuation">,</span>
            lineHeight<span class="token punctuation">,</span>
            <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">originX</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">originY</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span>
        <span class="token punctuation">}</span>
        options<span class="token punctuation">.</span>objects <span class="token operator">=</span> options<span class="token punctuation">.</span>objects <span class="token operator">||</span> <span class="token punctuation">[</span>
            defaultShapeOptions<span class="token punctuation">,</span>
            defaultTextOptions
        <span class="token punctuation">]</span>

        <span class="token keyword">const</span> shapeOptions <span class="token operator">=</span> objects<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> defaultShapeOptions
        <span class="token keyword">const</span> textOptions <span class="token operator">=</span> objects<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> defaultTextOptions

        shapeOptions<span class="token punctuation">.</span>width <span class="token operator">=</span> width
        shapeOptions<span class="token punctuation">.</span>height <span class="token operator">=</span> height
        shapeOptions<span class="token punctuation">.</span>fill <span class="token operator">=</span> shapeOptions<span class="token punctuation">.</span>fill <span class="token operator">||</span> <span class="token string">&#39;&#39;</span>
        shapeOptions<span class="token punctuation">.</span>stroke <span class="token operator">=</span> shapeOptions<span class="token punctuation">.</span>stroke <span class="token operator">||</span> stroke
        shapeOptions<span class="token punctuation">.</span>strokeWidth <span class="token operator">=</span> shapeOptions<span class="token punctuation">.</span>strokeWidth <span class="token operator">||</span> strokeWidth

        <span class="token keyword">let</span> shape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token operator">...</span>shapeOptions<span class="token punctuation">,</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> id <span class="token operator">+</span> <span class="token string">&#39;_rect&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">strokeUniform</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        textOptions<span class="token punctuation">.</span>text <span class="token operator">=</span> textOptions<span class="token punctuation">.</span>text <span class="token operator">||</span> <span class="token string">&#39;&#39;</span>
        textOptions<span class="token punctuation">.</span>width <span class="token operator">=</span> width <span class="token operator">-</span> strokeWidth <span class="token operator">*</span> <span class="token number">2</span>
        textOptions<span class="token punctuation">.</span>fill <span class="token operator">=</span> textOptions<span class="token punctuation">.</span>fill <span class="token operator">||</span> fill
        textOptions<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> textOptions<span class="token punctuation">.</span>fontSize <span class="token operator">||</span> fontSize
        textOptions<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> textOptions<span class="token punctuation">.</span>textAlign <span class="token operator">||</span> textAlign
        textOptions<span class="token punctuation">.</span>lineHeight <span class="token operator">=</span> textOptions<span class="token punctuation">.</span>lineHeight <span class="token operator">||</span> lineHeight

        <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Textbox</span><span class="token punctuation">(</span>textOptions<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>textOptions<span class="token punctuation">,</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> id <span class="token operator">+</span> <span class="token string">&#39;_text&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token punctuation">(</span>height <span class="token operator">+</span> strokeWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token punctuation">(</span>width <span class="token operator">+</span> strokeWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">splitByGrapheme</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">strokeUniform</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">originX</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">originY</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> group <span class="token operator">=</span> <span class="token punctuation">[</span>shape<span class="token punctuation">,</span> text<span class="token punctuation">]</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callSuper</span><span class="token punctuation">(</span><span class="token string">&#39;initialize&#39;</span><span class="token punctuation">,</span> group<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>restOptions<span class="token punctuation">,</span>
            <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">strokeUniform</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// useSetOnGroup: true,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> isAlreadyGrouped<span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;mousedblclick&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dblclickEditing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">_set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_objects<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>useSetOnGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>_objects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setOnGroup</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#39;canvas&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>_objects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">_set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        fabric<span class="token punctuation">.</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">_set</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callSuper</span><span class="token punctuation">(</span><span class="token string">&#39;set&#39;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span>object<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>fabric<span class="token punctuation">.</span><span class="token class-name">RectText</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> TempText<span class="token punctuation">)</span>
fabric<span class="token punctuation">.</span>RectText<span class="token punctuation">.</span><span class="token function-variable function">fromObject</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> fabric<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">_fromObject</span><span class="token punctuation">(</span><span class="token string">&#39;RectText&#39;</span><span class="token punctuation">,</span> object<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="code-tab" id="codetab-98-1" role="tabpanel" aria-expanded="false"><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>fabric<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;fabric&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> TempText <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 文字样式相关属性</span>
    <span class="token literal-property property">textStyleProperties</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;fill&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;fontSize&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;lineHeight&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;textAlign&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 计算临时文本对象的变换</span>
    <span class="token function">calcTempTextTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// const text = this.items(1)</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token string">&#39;textbox&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token comment">// 便签矩阵</span>
        <span class="token keyword">const</span> groupMatrix <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calcTransformMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 便签矩阵逆变换</span>
        <span class="token keyword">const</span> invertMatrix <span class="token operator">=</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">invertTransform</span><span class="token punctuation">(</span>groupMatrix<span class="token punctuation">)</span>
        <span class="token comment">// 文本矩阵</span>
        <span class="token keyword">const</span> textMatrix <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">calcTransformMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 矩阵嵌套</span>
        <span class="token keyword">const</span> desiredMatrix <span class="token operator">=</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">multiplyTransformMatrices</span><span class="token punctuation">(</span>invertMatrix<span class="token punctuation">,</span> textMatrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token comment">// 新的矩阵</span>
        <span class="token keyword">const</span> newMatrix <span class="token operator">=</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">multiplyTransformMatrices</span><span class="token punctuation">(</span>groupMatrix<span class="token punctuation">,</span> desiredMatrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token comment">// 矩阵分解为变换量</span>
        <span class="token keyword">const</span> qr <span class="token operator">=</span> fabric<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">qrDecompose</span><span class="token punctuation">(</span>newMatrix<span class="token punctuation">)</span>
        <span class="token keyword">return</span> qr
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 计算临时文本对象的位置</span>
    <span class="token function">calcTempTextPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> absoluteLeft<span class="token punctuation">,</span> absoluteTop
        <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token string">&#39;textbox&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> center <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCenterPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> textCenter <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">getCenterPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;thisCenter&#39;</span><span class="token punctuation">,</span> center<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;textCenter&#39;</span><span class="token punctuation">,</span> textCenter<span class="token punctuation">)</span>
        absoluteLeft <span class="token operator">=</span> center<span class="token punctuation">.</span>x <span class="token operator">+</span> textCenter<span class="token punctuation">.</span>x <span class="token operator">*</span> text<span class="token punctuation">.</span>scaleX
        absoluteTop <span class="token operator">=</span> center<span class="token punctuation">.</span>y <span class="token operator">+</span> textCenter<span class="token punctuation">.</span>y <span class="token operator">*</span> text<span class="token punctuation">.</span>scaleY
        <span class="token keyword">const</span> group <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>group
        <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span>scaleX<span class="token punctuation">,</span> scaleY<span class="token punctuation">}</span> <span class="token operator">=</span> group
            <span class="token keyword">const</span> groupCenter <span class="token operator">=</span> group<span class="token punctuation">.</span><span class="token function">getCenterPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;groupCenter&#39;</span><span class="token punctuation">,</span> groupCenter<span class="token punctuation">)</span>
            absoluteLeft <span class="token operator">=</span> absoluteLeft <span class="token operator">*</span> scaleX <span class="token operator">+</span> groupCenter<span class="token punctuation">.</span>x
            absoluteTop <span class="token operator">=</span> absoluteTop <span class="token operator">*</span> scaleY <span class="token operator">+</span> groupCenter<span class="token punctuation">.</span>y
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">left</span><span class="token operator">:</span> absoluteLeft<span class="token punctuation">,</span>
            <span class="token literal-property property">top</span><span class="token operator">:</span> absoluteTop
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 双击编辑文本方法</span>
    <span class="token function">dblclickEditing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token string">&#39;textbox&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token comment">// console.log(&#39;text&#39;, text)</span>

        <span class="token comment">// 创建临时编辑文本复制对象</span>
        <span class="token keyword">let</span> cloneText
        text<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(&#39;clone&#39;, obj)</span>
            <span class="token keyword">let</span> tempPath <span class="token operator">=</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>id
            <span class="token keyword">let</span> tempType <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>group<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                tempPath <span class="token operator">=</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>group<span class="token punctuation">.</span>id <span class="token operator">+</span> tempPath
                tempType <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>group<span class="token punctuation">.</span>type
            <span class="token punctuation">}</span>
            <span class="token comment">// 标识为临时文本对象</span>
            obj<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">&#39;temp_&#39;</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>id
            <span class="token comment">// 临时文本元素层级路径</span>
            obj<span class="token punctuation">.</span>tempPath <span class="token operator">=</span> tempPath
            <span class="token comment">// 临时文本类型（顶层元素类型）</span>
            obj<span class="token punctuation">.</span>tempType <span class="token operator">=</span> tempType
            <span class="token keyword">const</span> pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calcTempTextPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> qr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calcTempTextTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            obj<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token operator">...</span>pos<span class="token punctuation">,</span>
                <span class="token operator">...</span>qr
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            cloneText <span class="token operator">=</span> obj
            <span class="token comment">// 原始文本对象暂时隐藏</span>
            text<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;visible&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
            <span class="token comment">// 开始编辑</span>
            cloneText<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;editing:entered&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token string">&#39;editing:entered&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">target</span><span class="token operator">:</span> cloneText<span class="token punctuation">,</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span> tempPath
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>

            <span class="token comment">// 编辑中</span>
            cloneText<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;changed&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> value <span class="token operator">=</span> cloneText<span class="token punctuation">.</span>text
                text<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token string">&#39;changed&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            cloneText<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;editing:exited&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// 退出编辑状态， 将临时文本对象text值赋给原始文本对象</span>
                <span class="token comment">// console.log(&#39;editing:exited&#39;, cloneText.text)</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span>fontSize<span class="token punctuation">,</span> fill<span class="token punctuation">}</span> <span class="token operator">=</span> cloneText
                text<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    fontSize<span class="token punctuation">,</span>
                    fill<span class="token punctuation">,</span>
                    <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token comment">// 移除临时文本对象</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>cloneText<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token string">&#39;editing:exited&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>

            <span class="token comment">// 将临时文本对象加入画布，并激活，选中进入编辑态</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cloneText<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">setActiveObject</span><span class="token punctuation">(</span>cloneText<span class="token punctuation">)</span>
            cloneText<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;hasBorders&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
            cloneText<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            cloneText<span class="token punctuation">.</span><span class="token function">enterEditing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&#39;temp:text:&#39;</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">setText</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>textStyleProperties<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTextValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>textStyleProperties<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTextStyle</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> _key <span class="token keyword">in</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>textStyleProperties<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>_key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>key<span class="token punctuation">[</span>_key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>_key <span class="token operator">===</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTextValue</span><span class="token punctuation">(</span>key<span class="token punctuation">[</span>_key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>textStyleProperties<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>_key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTextStyle</span><span class="token punctuation">(</span>_key<span class="token punctuation">,</span> key<span class="token punctuation">[</span>_key<span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * 设置文本值
     */</span>
    <span class="token function-variable function">setTextValue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token string">&#39;textbox&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        text <span class="token operator">&amp;&amp;</span> text<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * 设置文本样式
     * <span class="token keyword">@param</span> <span class="token parameter">key</span> fill | fontSize
     * <span class="token keyword">@param</span> <span class="token parameter">value</span>
     */</span>
    <span class="token function-variable function">setTextStyle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token string">&#39;textbox&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        text <span class="token operator">&amp;&amp;</span> text<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></div><!--]--></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/lxuan1997/iCode/edit/master/docs/fabric/vue.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/iCode/fabric/" class="router-link-active" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--[--><!----><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/iCode/assets/app-c0a93dd5.js" defer></script>
  </body>
</html>
